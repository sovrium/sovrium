{
  "$id": "id.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Table ID",
  "description": "Unique string identifier for the table entity (e.g., 'tbl_products', 'tbl_customers'). This is the configuration-level identifier used to reference tables in the application schema, NOT the database record ID. Commonly prefixed with 'tbl_' for clarity. Must be unique across all tables in the application.",
  "type": "string",
  "minLength": 1,
  "examples": [
    "tbl_products",
    "tbl_customers",
    "tbl_orders",
    "table-1",
    "550e8400-e29b-41d4-a716-446655440000"
  ],
  "x-specs": [
    {
      "id": "APP-TABLES-ID-001",
      "given": "a table ID as string",
      "when": "value is 'tbl_products'",
      "then": "it should validate as unique identifier",
      "application": {
        "table": {
          "id": "tbl_products",
          "name": "products",
          "fields": [
            {
              "id": 1,
              "name": "title",
              "type": "single-line-text",
              "required": true
            }
          ]
        },
        "assertions": [
          "Table ID: 'tbl_products' (string)",
          "Unique identifier for table entity",
          "Used for schema references and configuration"
        ]
      }
    },
    {
      "id": "APP-TABLES-ID-002",
      "given": "a table ID following common pattern",
      "when": "ID uses 'tbl_' prefix convention",
      "then": "it should accept conventional table identifiers",
      "application": {
        "table": {
          "id": "tbl_customers",
          "name": "customers",
          "fields": [
            {
              "id": 1,
              "name": "email",
              "type": "email",
              "required": true
            }
          ]
        },
        "assertions": [
          "Convention: 'tbl_' prefix for clarity",
          "Distinguishes table IDs from other entity types",
          "Common pattern in no-code platforms"
        ]
      }
    },
    {
      "id": "APP-TABLES-ID-003",
      "given": "a table without explicit ID",
      "when": "ID property is omitted",
      "then": "it should allow auto-generated ID (ID is required but can be auto-generated)",
      "application": {
        "table": {
          "name": "orders",
          "fields": [
            {
              "id": 1,
              "name": "order_number",
              "type": "single-line-text",
              "required": true
            }
          ]
        },
        "autoGenerated": {
          "id": "auto-generated-tbl-id",
          "mechanism": "System generates ID if not provided"
        },
        "assertions": [
          "ID required in schema but can be auto-generated",
          "Auto-generation: System creates ID automatically",
          "Common for programmatic table creation"
        ]
      }
    },
    {
      "id": "APP-TABLES-ID-004",
      "given": "a table ID with UUID format",
      "when": "value is '550e8400-e29b-41d4-a716-446655440000'",
      "then": "it should accept UUID as identifier",
      "application": {
        "table": {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "invoices",
          "fields": [
            {
              "id": 1,
              "name": "amount",
              "type": "decimal",
              "required": true
            }
          ]
        },
        "assertions": [
          "UUID format: Standard universally unique identifier",
          "Guaranteed uniqueness across systems",
          "Common choice for programmatic generation"
        ]
      }
    },
    {
      "id": "APP-TABLES-ID-005",
      "given": "a table ID with simple string",
      "when": "value is 'products' or 'table-1'",
      "then": "it should accept simple string identifiers",
      "application": {
        "table": {
          "id": "products",
          "name": "products",
          "fields": [
            {
              "id": 1,
              "name": "sku",
              "type": "single-line-text",
              "required": true
            }
          ]
        },
        "assertions": [
          "Simple string: No prefix required",
          "Flexible identifier format",
          "User-friendly naming"
        ]
      }
    },
    {
      "id": "APP-TABLES-ID-006",
      "given": "table IDs across multiple tables",
      "when": "each table has unique ID",
      "then": "it should ensure uniqueness across all tables in application",
      "application": {
        "tables": [
          {
            "id": "tbl_products",
            "name": "products",
            "fields": []
          },
          {
            "id": "tbl_customers",
            "name": "customers",
            "fields": []
          },
          {
            "id": "tbl_orders",
            "name": "orders",
            "fields": []
          }
        ],
        "uniqueness": {
          "ids": ["tbl_products", "tbl_customers", "tbl_orders"],
          "constraint": "All table IDs must be unique",
          "violation": "Duplicate IDs rejected"
        },
        "assertions": [
          "Uniqueness enforced: All table IDs must be distinct",
          "Schema validation: Duplicate IDs cause configuration error",
          "Application-level constraint"
        ]
      }
    },
    {
      "id": "APP-TABLES-ID-REGRESSION-001",
      "given": "complete application configuration with all features",
      "when": "user completes full workflow",
      "then": "user can complete full table ID workflow"
    }
  ]
}
