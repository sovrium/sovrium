{
  "$id": "fields.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "View Fields",
  "description": "Field visibility and display configuration for view",
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "minLength": 1,
        "description": "Name of the field"
      },
      "visible": {
        "type": "boolean",
        "default": true,
        "description": "Whether the field is visible in this view"
      },
      "width": {
        "type": "integer",
        "minimum": 50,
        "maximum": 1000,
        "description": "Column width in pixels for grid views"
      },
      "order": {
        "type": "integer",
        "minimum": 1,
        "description": "Display order of the field (1 = first column)"
      }
    },
    "required": ["name"],
    "additionalProperties": false
  },
  "examples": [
    [
      {
        "name": "id",
        "visible": true,
        "width": 80,
        "order": 1
      },
      {
        "name": "name",
        "visible": true,
        "width": 200,
        "order": 2
      },
      {
        "name": "status",
        "visible": true,
        "width": 120,
        "order": 3
      }
    ],
    [
      {
        "name": "created_at",
        "visible": false
      },
      {
        "name": "title",
        "visible": true,
        "order": 1
      }
    ]
  ],
  "x-specs": [
    {
      "id": "APP-TABLES-VIEW-FIELDS-001",
      "given": "a view with specific fields configured as visible",
      "when": "displaying records in the view",
      "then": "only configured visible fields should be shown",
      "validation": {
        "setup": {
          "fieldConfig": {
            "name": "example_field",
            "type": "text"
          }
        },
        "assertions": [
          {
            "description": "only configured visible fields should be shown",
            "validateConfig": true
          }
        ]
      }
    },
    {
      "id": "APP-TABLES-VIEW-FIELDS-002",
      "given": "a view with fields configured with custom order",
      "when": "displaying records in the view",
      "then": "fields should appear in the specified order",
      "validation": {
        "setup": {
          "fieldConfig": {
            "name": "example_field",
            "type": "text"
          }
        },
        "assertions": [
          {
            "description": "fields should appear in the specified order",
            "validateConfig": true
          }
        ]
      }
    },
    {
      "id": "APP-TABLES-VIEW-FIELDS-003",
      "given": "a view with a field marked as visible: false",
      "when": "displaying records in the view",
      "then": "that field should not be shown",
      "validation": {
        "setup": {
          "fieldConfig": {
            "name": "example_field",
            "type": "text"
          }
        },
        "assertions": [
          {
            "description": "that field should not be shown",
            "validateConfig": true
          }
        ]
      }
    }
  ]
}
