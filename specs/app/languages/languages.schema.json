{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "languages.schema.json",
  "title": "Languages Configuration",
  "description": "Multi-language support configuration for the entire application",
  "type": "object",
  "properties": {
    "default": {
      "type": "string",
      "pattern": "^[a-z]{2}$",
      "description": "Default language code (short code used for URLs/routing)",
      "examples": ["en", "fr", "es"]
    },
    "supported": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "./language-config.schema.json"
      },
      "description": "List of supported languages"
    },
    "fallback": {
      "type": "string",
      "pattern": "^[a-z]{2}$",
      "description": "Fallback language when translation is missing (defaults to 'default' language if not specified). Uses short code (e.g., 'en', 'fr')"
    },
    "detectBrowser": {
      "type": "boolean",
      "default": true,
      "description": "Auto-detect language from browser"
    },
    "persistSelection": {
      "type": "boolean",
      "default": true,
      "description": "Remember user's language choice in localStorage"
    },
    "translations": {
      "type": "object",
      "patternProperties": {
        "^[a-z]{2}$": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z0-9._-]+$": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "description": "Translation dictionary with flat keys (e.g., 'common.save', 'homepage.hero.title'). Organized by feature/page for better maintainability. Use semantic keys that describe meaning, not location."
        }
      },
      "additionalProperties": false,
      "description": "Centralized translation dictionaries for all supported languages. Keys are short language codes (en, fr, es). Use $t:key syntax in ANY string property to reference translations: children arrays (['$t:common.save']), component props ({ 'aria-label': '$t:common.close', placeholder: '$t:forms.email.placeholder' }), meta properties ({ title: '$t:page.title' }), etc. This is the ONLY supported i18n pattern."
    }
  },
  "required": ["default", "supported"],
  "additionalProperties": false,
  "x-validation-rules": {
    "default-in-supported": {
      "description": "The 'default' language code must exist in the 'supported' array",
      "rule": "languages.supported.some(lang => lang.code === languages.default)",
      "errorMessage": "Default language '{default}' not found in supported languages",
      "severity": "error"
    },
    "fallback-in-supported": {
      "description": "The 'fallback' language code (if specified) must exist in the 'supported' array",
      "rule": "!languages.fallback || languages.supported.some(lang => lang.code === languages.fallback)",
      "errorMessage": "Fallback language '{fallback}' not found in supported languages",
      "severity": "error"
    }
  },
  "x-reference-syntax": {
    "translation-references": {
      "pattern": "$t:{key.path}",
      "description": "Reference centralized translations from languages.translations dictionary",
      "usage": "Use in ANY string property: children arrays, component props, meta properties, etc.",
      "examples": {
        "children": "['$t:common.save']",
        "props": "{ 'aria-label': '$t:common.close', placeholder: '$t:forms.email.placeholder' }",
        "meta": "{ title: '$t:page.title', description: '$t:page.description' }",
        "image": "{ alt: '$t:images.logo.alt' }"
      },
      "resolution": {
        "lookup": "languages.translations[currentLanguage][key.path]",
        "fallback": "If key not found in currentLanguage, falls back to languages.fallback (or languages.default if fallback not specified)",
        "runtime": "Resolved at page render time, reactive to language changes"
      },
      "benefits": [
        "DRY: Single source of truth for all translations",
        "Reusability: Same key used across multiple components",
        "Consistency: Centralized management ensures consistent wording",
        "Type safety: Can be validated at build time",
        "Hot-reload: Translation changes update all references automatically"
      ]
    }
  },
  "examples": [
    {
      "default": "en",
      "supported": [
        {
          "code": "en",
          "label": "English",
          "locale": "en-US",
          "direction": "ltr"
        },
        {
          "code": "fr",
          "label": "FranÃ§ais",
          "locale": "fr-FR",
          "direction": "ltr"
        },
        {
          "code": "ar",
          "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
          "locale": "ar-SA",
          "direction": "rtl"
        }
      ],
      "detectBrowser": true,
      "persistSelection": true
    },
    {
      "default": "fr",
      "supported": [
        {
          "code": "en",
          "label": "English",
          "locale": "en-US",
          "direction": "ltr"
        },
        {
          "code": "fr",
          "label": "FranÃ§ais",
          "locale": "fr-FR",
          "direction": "ltr"
        }
      ],
      "fallback": "en",
      "detectBrowser": true,
      "persistSelection": true
    },
    {
      "default": "en",
      "supported": [
        {
          "code": "en",
          "label": "English",
          "locale": "en-US",
          "direction": "ltr"
        },
        {
          "code": "fr",
          "label": "FranÃ§ais",
          "locale": "fr-FR",
          "direction": "ltr"
        }
      ],
      "detectBrowser": true,
      "persistSelection": true,
      "translations": {
        "en": {
          "common.save": "Save",
          "common.cancel": "Cancel",
          "common.delete": "Delete",
          "common.edit": "Edit",
          "common.back": "Back",
          "common.next": "Next",
          "common.previous": "Previous",
          "common.submit": "Submit",
          "nav.home": "Home",
          "nav.about": "About",
          "nav.contact": "Contact",
          "nav.login": "Login",
          "nav.logout": "Logout",
          "homepage.hero.title": "Welcome to Sovrium",
          "homepage.hero.subtitle": "Build your app with configuration",
          "homepage.hero.cta": "Get Started",
          "homepage.features.title": "Features",
          "homepage.features.subtitle": "Everything you need to build amazing apps",
          "errors.404": "Page not found",
          "errors.500": "Server error",
          "errors.generic": "Something went wrong",
          "forms.email.label": "Email Address",
          "forms.email.placeholder": "Enter your email",
          "forms.password.label": "Password",
          "forms.password.placeholder": "Enter your password",
          "a11y.close": "Close",
          "a11y.open-menu": "Open menu",
          "a11y.search": "Search",
          "images.logo.alt": "Company logo",
          "images.hero.alt": "Hero banner image"
        },
        "fr": {
          "common.save": "Enregistrer",
          "common.cancel": "Annuler",
          "common.delete": "Supprimer",
          "common.edit": "Modifier",
          "common.back": "Retour",
          "common.next": "Suivant",
          "common.previous": "PrÃ©cÃ©dent",
          "common.submit": "Soumettre",
          "nav.home": "Accueil",
          "nav.about": "Ã€ propos",
          "nav.contact": "Contact",
          "nav.login": "Connexion",
          "nav.logout": "DÃ©connexion",
          "homepage.hero.title": "Bienvenue sur Sovrium",
          "homepage.hero.subtitle": "CrÃ©ez votre application avec configuration",
          "homepage.hero.cta": "Commencer",
          "homepage.features.title": "FonctionnalitÃ©s",
          "homepage.features.subtitle": "Tout ce dont vous avez besoin pour crÃ©er des applications incroyables",
          "errors.404": "Page non trouvÃ©e",
          "errors.500": "Erreur serveur",
          "errors.generic": "Quelque chose s'est mal passÃ©",
          "forms.email.label": "Adresse e-mail",
          "forms.email.placeholder": "Entrez votre e-mail",
          "forms.password.label": "Mot de passe",
          "forms.password.placeholder": "Entrez votre mot de passe",
          "a11y.close": "Fermer",
          "a11y.open-menu": "Ouvrir le menu",
          "a11y.search": "Rechercher",
          "images.logo.alt": "Logo de l'entreprise",
          "images.hero.alt": "Image de banniÃ¨re hÃ©ros"
        }
      }
    },
    {
      "_comment": "Example showing $t: usage in ALL string properties (children, props, meta)",
      "default": "en",
      "supported": [
        {
          "code": "en",
          "label": "English",
          "locale": "en-US",
          "direction": "ltr"
        },
        {
          "code": "fr",
          "label": "FranÃ§ais",
          "locale": "fr-FR",
          "direction": "ltr"
        }
      ],
      "translations": {
        "en": {
          "page.home.title": "Home - My App",
          "page.home.description": "Welcome to my application",
          "button.close": "Close",
          "button.save": "Save",
          "input.search.placeholder": "Search...",
          "input.search.label": "Search",
          "image.logo.alt": "Application logo"
        },
        "fr": {
          "page.home.title": "Accueil - Mon App",
          "page.home.description": "Bienvenue sur mon application",
          "button.close": "Fermer",
          "button.save": "Enregistrer",
          "input.search.placeholder": "Rechercher...",
          "input.search.label": "Rechercher",
          "image.logo.alt": "Logo de l'application"
        }
      },
      "x-usage-examples": {
        "children": {
          "type": "button",
          "children": ["$t:button.save"]
        },
        "props": {
          "type": "button",
          "props": {
            "aria-label": "$t:button.close"
          },
          "children": ["Ã—"]
        },
        "meta": {
          "type": "page",
          "meta": {
            "title": "$t:page.home.title",
            "description": "$t:page.home.description"
          }
        },
        "input": {
          "type": "input",
          "props": {
            "placeholder": "$t:input.search.placeholder",
            "aria-label": "$t:input.search.label"
          }
        },
        "image": {
          "type": "img",
          "props": {
            "alt": "$t:image.logo.alt"
          }
        },
        "note": "$t: syntax works in ANY string property - not limited to children arrays"
      }
    }
  ],
  "x-specs": [
    {
      "id": "APP-LANGUAGES-001",
      "given": "an app with default language en and one supported language",
      "when": "app is configured with minimal language setup",
      "then": "it should use English as the only available language",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              }
            ]
          }
        },
        "assertions": [
          "Default: 'en'",
          "Supported: 1 language (en only)",
          "Minimal valid configuration",
          "Single-language mode"
        ]
      },
      "application": {
        "blocks": [
          {
            "name": "language-switcher",
            "type": "language-switcher",
            "props": {
              "variant": "dropdown"
            }
          }
        ],
        "pages": [
          {
            "name": "Home",
            "path": "/",
            "meta": {
              "lang": "en-US",
              "title": "Test",
              "description": "Test"
            },
            "sections": [
              {
                "block": "language-switcher"
              }
            ]
          }
        ],
        "expectedBehavior": [
          "Language switcher renders on the page",
          "Dropdown displays 'English' as the only option",
          "Default language (en-US) is pre-selected",
          "Single-language mode (no actual switching possible)",
          "Page lang attribute set to en-US"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-002",
      "given": "an app with default en and supported languages [en, fr, es]",
      "when": "app is configured with multiple languages",
      "then": "users should be able to switch between all three languages",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              },
              {
                "code": "es",
                "label": "EspaÃ±ol",
                "locale": "es-ES"
              }
            ]
          }
        },
        "assertions": [
          "Default: 'en-US'",
          "Supported: 3 languages",
          "Multi-language configuration",
          "Language switcher enabled"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "supported": [
            {
              "code": "en",
              "label": "English"
            },
            {
              "code": "fr",
              "label": "FranÃ§ais"
            },
            {
              "code": "es",
              "label": "EspaÃ±ol"
            }
          ]
        },
        "component": "language-switcher",
        "expectedDOM": "<div data-testid=\"language-switcher\"><button data-testid=\"language-option-en\" class=\"active\">English</button><button data-testid=\"language-option-fr\">FranÃ§ais</button><button data-testid=\"language-option-es\">EspaÃ±ol</button></div>",
        "assertions": [
          "3 language buttons rendered",
          "English marked as active (default)",
          "Clicking fr-FR button switches to French",
          "All supported languages accessible"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-003",
      "given": "an app with default en and fallback en",
      "when": "a translation is missing for the current language",
      "then": "it should display the English fallback text",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "fallback": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "Fallback: 'en-US'",
          "Missing translations fall back to English",
          "Prevents blank/missing text",
          "Graceful degradation"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "fallback": "en",
          "currentLanguage": "fr"
        },
        "translations": {
          "en-US": {
            "welcome": "Welcome",
            "goodbye": "Goodbye"
          },
          "fr-FR": {
            "welcome": "Bienvenue"
          }
        },
        "component": "text",
        "expectedDOM": "<div><p data-testid=\"welcome-text\">Bienvenue</p><p data-testid=\"goodbye-text\">Goodbye</p></div>",
        "assertions": [
          "welcome: 'Bienvenue' (French translation exists)",
          "goodbye: 'Goodbye' (falls back to English, French translation missing)",
          "Fallback prevents empty text",
          "Seamless UX with incomplete translations"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-004",
      "given": "an app with detectBrowser set to true",
      "when": "user visits the site for the first time",
      "then": "it should automatically detect and set the browser's preferred language",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "detectBrowser": true,
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "detectBrowser: true",
          "Auto-detects navigator.language",
          "Matches browser language to supported array",
          "Falls back to default if no match"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "detectBrowser": true,
          "supported": ["en", "fr"]
        },
        "browserLanguage": "fr",
        "component": "app",
        "expectedDOM": "<html lang=\"fr-FR\"><body>...</body></html>",
        "localStorage": null,
        "assertions": [
          "Browser language: navigator.language = 'fr-FR'",
          "Auto-detects and sets French",
          "HTML lang=\"fr-FR\"",
          "No localStorage interaction on first visit",
          "Smart default based on user's browser"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-005",
      "given": "an app with detectBrowser set to false",
      "when": "user visits the site",
      "then": "it should use the default language without auto-detection",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "detectBrowser": false,
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "detectBrowser: false",
          "Ignores navigator.language",
          "Always uses default language",
          "Manual language selection required"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "detectBrowser": false
        },
        "browserLanguage": "fr",
        "component": "app",
        "expectedDOM": "<html lang=\"en-US\"><body>...</body></html>",
        "assertions": [
          "Browser language: 'fr-FR' (ignored)",
          "Uses default: 'en-US'",
          "HTML lang=\"en-US\"",
          "No auto-detection, explicit control"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-006",
      "given": "an app with persistSelection set to true",
      "when": "user manually selects a language",
      "then": "it should remember the choice in localStorage for future visits",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "persistSelection": true,
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "persistSelection: true",
          "Saves language to localStorage",
          "Remembers choice across sessions",
          "User preference persisted"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "persistSelection": true
        },
        "userAction": "Click fr-FR button",
        "component": "language-switcher",
        "localStorage": {
          "key": "sovrium_language",
          "value": "fr"
        },
        "expectedDOM": "<html lang=\"fr-FR\"><body>...</body></html>",
        "assertions": [
          "User selects French",
          "localStorage.setItem('sovrium_language', 'fr')",
          "HTML updates to lang=\"fr-FR\"",
          "On next visit: reads localStorage and restores French",
          "Persistent language preference"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-007",
      "given": "an app with persistSelection set to false",
      "when": "user manually selects a language",
      "then": "it should not persist the choice and reset to default on next visit",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "persistSelection": false,
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "persistSelection: false",
          "No localStorage interaction",
          "Language selection is session-only",
          "Resets to default on reload"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "persistSelection": false
        },
        "userAction": "Click fr-FR button",
        "component": "language-switcher",
        "localStorage": null,
        "expectedDOM": "<html lang=\"fr-FR\"><body>...</body></html>",
        "assertions": [
          "User selects French (session only)",
          "No localStorage write",
          "HTML updates to lang=\"fr-FR\" (current session)",
          "On page reload: resets to default 'en-US'",
          "Session-only language selection"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-008",
      "given": "an app with supported languages including RTL (ar) and LTR (en)",
      "when": "user switches between English and Arabic",
      "then": "the entire app layout should flip between LTR and RTL direction",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US",
                "direction": "ltr"
              },
              {
                "code": "ar",
                "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                "locale": "ar-SA",
                "direction": "rtl"
              }
            ]
          }
        },
        "assertions": [
          "English: direction='ltr'",
          "Arabic: direction='rtl'",
          "Supports bidirectional layouts",
          "RTL mirrors entire UI"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "supported": [
            {
              "code": "en",
              "direction": "ltr"
            },
            {
              "code": "ar",
              "direction": "rtl"
            }
          ]
        },
        "userAction": "Switch from en-US to ar-SA",
        "component": "app",
        "expectedDOM": "<html lang=\"ar-SA\" dir=\"rtl\"><body>...</body></html>",
        "assertions": [
          "Before: <html lang=\"en-US\" dir=\"ltr\">",
          "After: <html lang=\"ar-SA\" dir=\"rtl\">",
          "Entire layout mirrors horizontally",
          "Text flows right-to-left",
          "Menus, buttons, forms flip alignment",
          "Complete RTL support"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-009",
      "given": "an app with 5+ supported languages from different regions",
      "when": "user opens language switcher",
      "then": "all languages should be displayed with their native labels and flags",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US",
                "flag": "ðŸ‡ºðŸ‡¸"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR",
                "flag": "ðŸ‡«ðŸ‡·"
              },
              {
                "code": "es",
                "label": "EspaÃ±ol",
                "locale": "es-ES",
                "flag": "ðŸ‡ªðŸ‡¸"
              },
              {
                "code": "de",
                "label": "Deutsch",
                "locale": "de-DE",
                "flag": "ðŸ‡©ðŸ‡ª"
              },
              {
                "code": "ja",
                "label": "æ—¥æœ¬èªž",
                "locale": "ja-JP",
                "flag": "ðŸ‡¯ðŸ‡µ"
              },
              {
                "code": "ar",
                "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                "flag": "ðŸ‡¸ðŸ‡¦"
              }
            ]
          }
        },
        "assertions": [
          "6 supported languages",
          "Native labels for all languages",
          "Flag emojis for visual identification",
          "Global language support"
        ]
      },
      "application": {
        "languages": {
          "supported": [
            {
              "code": "en",
              "label": "English",
              "flag": "ðŸ‡ºðŸ‡¸"
            },
            {
              "code": "fr",
              "label": "FranÃ§ais",
              "flag": "ðŸ‡«ðŸ‡·"
            },
            {
              "code": "ja-JP",
              "label": "æ—¥æœ¬èªž",
              "flag": "ðŸ‡¯ðŸ‡µ"
            },
            {
              "code": "ar",
              "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
              "flag": "ðŸ‡¸ðŸ‡¦"
            }
          ]
        },
        "component": "language-switcher",
        "expectedDOM": "<div data-testid=\"language-switcher\"><button data-testid=\"language-option-en\">ðŸ‡ºðŸ‡¸ English</button><button data-testid=\"language-option-fr\">ðŸ‡«ðŸ‡· FranÃ§ais</button><button data-testid=\"language-option-ja\">ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž</button><button data-testid=\"language-option-ar\">ðŸ‡¸ðŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button></div>",
        "assertions": [
          "All languages listed with flags",
          "Native labels: FranÃ§ais, æ—¥æœ¬èªž, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
          "UTF-8 support: Latin, Japanese, Arabic scripts",
          "Visual flags aid recognition",
          "International UX"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-010",
      "given": "an app with all features enabled (detectBrowser, persistSelection, fallback)",
      "when": "language configuration is fully utilized",
      "then": "it should provide seamless multi-language UX with auto-detection, persistence, and fallback",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "fallback": "en",
            "detectBrowser": true,
            "persistSelection": true,
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "All features enabled",
          "detectBrowser: auto-detection on first visit",
          "persistSelection: remembers user choice",
          "fallback: handles missing translations",
          "Complete multi-language system"
        ]
      },
      "application": {
        "blocks": [
          {
            "name": "language-switcher",
            "type": "language-switcher",
            "props": {
              "variant": "dropdown"
            }
          }
        ],
        "pages": [
          {
            "name": "Home",
            "path": "/",
            "meta": {
              "lang": "en-US",
              "title": "Test",
              "description": "Test"
            },
            "sections": [
              {
                "block": "language-switcher"
              }
            ]
          }
        ],
        "expectedBehavior": [
          "On first visit: automatically detects browser language (detectBrowser: true)",
          "If browser is French and fr-FR supported, auto-selects French",
          "User can manually switch languages via dropdown",
          "Language choice persisted in localStorage (persistSelection: true)",
          "On subsequent visits, loads saved language from localStorage",
          "If translation key missing, falls back to English (fallback: en-US)",
          "Complete language experience with all features working together"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-011",
      "given": "an app with default language code not in supported array",
      "when": "default is 'en-US' but supported array only contains fr-FR and es-ES",
      "then": "it should fail validation - default language must be in supported array",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              },
              {
                "code": "es",
                "label": "EspaÃ±ol",
                "locale": "es-ES"
              }
            ]
          }
        },
        "assertions": [
          "INVALID: default 'en-US' not in supported array",
          "Validation error: default must be one of supported codes",
          "Prevents configuration errors",
          "Schema constraint enforced"
        ],
        "expectValidation": "fail"
      },
      "application": {
        "expectedBehavior": [
          "Build-time validation fails with clear error message",
          "Error: 'Default language en-US not found in supported languages'",
          "Prevents app from starting with invalid configuration",
          "Forces developer to fix configuration before deployment",
          "No runtime errors - caught early in build process"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-012",
      "given": "an app with fallback not in supported array",
      "when": "fallback is 'de-DE' but supported array doesn't contain it",
      "then": "it should fail validation - fallback language must be in supported array",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "fallback": "de",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "INVALID: fallback 'de-DE' not in supported array",
          "Validation error: fallback must be one of supported codes",
          "Prevents referencing unavailable language",
          "Schema constraint enforced"
        ],
        "expectValidation": "fail"
      },
      "application": {
        "expectedBehavior": [
          "Build-time validation fails with clear error message",
          "Error: 'Fallback language de-DE not found in supported languages'",
          "Prevents runtime errors when fallback is needed",
          "Ensures fallback translations actually exist",
          "Configuration must be fixed before app can build"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-013",
      "given": "an app without explicit fallback",
      "when": "fallback property is omitted",
      "then": "it should automatically use default language as fallback",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "No fallback property",
          "Fallback defaults to 'default' language",
          "Fallback = 'en-US' (same as default)",
          "Simplifies configuration"
        ]
      },
      "application": {
        "blocks": [
          {
            "name": "language-switcher",
            "type": "language-switcher",
            "props": {
              "variant": "dropdown"
            }
          }
        ],
        "pages": [
          {
            "name": "Home",
            "path": "/",
            "meta": {
              "lang": "en-US",
              "title": "Test",
              "description": "Test"
            },
            "sections": [
              {
                "block": "language-switcher"
              }
            ]
          }
        ],
        "expectedBehavior": [
          "Fallback automatically set to default language (en-US)",
          "When French translation missing, shows English text",
          "No need to explicitly configure fallback for simple cases",
          "Sensible default: fallback to the default language",
          "Simplifies configuration for most common use case"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-014",
      "given": "an app with fallback different from default",
      "when": "default is 'fr-FR' and fallback is 'en-US'",
      "then": "it should show English text when French translation is missing (useful for French site with English fallback)",
      "validation": {
        "setup": {
          "languages": {
            "default": "fr",
            "fallback": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ]
          }
        },
        "assertions": [
          "Default: 'fr-FR' (French by default)",
          "Fallback: 'en-US' (English fallback)",
          "Useful for non-English default sites",
          "Fallback can differ from default"
        ]
      },
      "application": {
        "languages": {
          "default": "fr",
          "fallback": "en",
          "currentLanguage": "fr"
        },
        "translations": {
          "en-US": {
            "welcome": "Welcome",
            "contact": "Contact"
          },
          "fr-FR": {
            "welcome": "Bienvenue"
          }
        },
        "component": "text",
        "expectedDOM": "<div><p data-testid=\"welcome-text\">Bienvenue</p><p data-testid=\"contact-text\">Contact</p></div>",
        "assertions": [
          "Default language: French",
          "welcome: 'Bienvenue' (French translation)",
          "contact: 'Contact' (falls back to English, no French translation)",
          "French-first site with English safety net",
          "Flexible fallback strategy"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-019",
      "given": "a page with translation tokens ($t:) in children arrays",
      "when": "the page is server-side rendered",
      "then": "translation tokens should be resolved to actual translated text in initial HTML (no $t: symbols remain)",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ],
            "translations": {
              "en-US": {
                "button.save": "Save",
                "button.cancel": "Cancel"
              },
              "fr-FR": {
                "button.save": "Enregistrer",
                "button.cancel": "Annuler"
              }
            }
          }
        },
        "assertions": [
          "$t: tokens in children resolve during SSR",
          "No $t: symbols in server-rendered HTML",
          "Translations applied before client hydration"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "translations": {
            "en-US": {
              "hero.title": "Welcome to Our Platform",
              "hero.cta": "Get Started"
            },
            "fr-FR": {
              "hero.title": "Bienvenue sur Notre Plateforme",
              "hero.cta": "Commencer"
            }
          }
        },
        "page": {
          "sections": [
            {
              "type": "h1",
              "children": ["$t:hero.title"]
            },
            {
              "type": "button",
              "children": ["$t:hero.cta"]
            }
          ]
        },
        "expectedDOM": {
          "en-US": "<h1>Welcome to Our Platform</h1><button>Get Started</button>",
          "fr-FR": "<h1>Bienvenue sur Notre Plateforme</h1><button>Commencer</button>"
        },
        "assertions": [
          "SSR resolution: $t:hero.title â†’ 'Welcome to Our Platform' (en-US)",
          "SSR resolution: $t:hero.cta â†’ 'Get Started' (en-US)",
          "Language switching: $t:hero.title â†’ 'Bienvenue sur Notre Plateforme' (fr-FR)",
          "No $t: symbols in HTML: Content fully resolved before sending to browser",
          "Server-side rendering: Translations applied during React renderToString()",
          "Client hydration ready: HTML contains final translated text"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-020",
      "given": "a page with translation tokens ($t:) in component props",
      "when": "the page is server-side rendered",
      "then": "translation tokens in props (aria-label, placeholder, title) should be resolved in initial HTML",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "translations": {
              "en-US": {
                "button.close": "Close",
                "input.search.placeholder": "Search..."
              },
              "fr-FR": {
                "button.close": "Fermer",
                "input.search.placeholder": "Rechercher..."
              }
            }
          }
        },
        "assertions": [
          "$t: tokens in props resolve during SSR",
          "ARIA labels contain translated text",
          "No $t: in HTML attributes"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "translations": {
            "en-US": {
              "close.label": "Close dialog",
              "search.placeholder": "Type to search",
              "save.tooltip": "Save changes"
            },
            "fr-FR": {
              "close.label": "Fermer le dialogue",
              "search.placeholder": "Tapez pour rechercher",
              "save.tooltip": "Enregistrer les modifications"
            }
          }
        },
        "page": {
          "sections": [
            {
              "type": "button",
              "props": {
                "aria-label": "$t:close.label",
                "title": "$t:save.tooltip"
              },
              "children": ["Ã—"]
            },
            {
              "type": "input",
              "props": {
                "placeholder": "$t:search.placeholder"
              }
            }
          ]
        },
        "expectedDOM": {
          "en-US": "<button aria-label=\"Close dialog\" title=\"Save changes\">Ã—</button><input placeholder=\"Type to search\" />",
          "fr-FR": "<button aria-label=\"Fermer le dialogue\" title=\"Enregistrer les modifications\">Ã—</button><input placeholder=\"Tapez pour rechercher\" />"
        },
        "assertions": [
          "Prop translation: aria-label='$t:close.label' â†’ 'Close dialog' (en-US)",
          "Prop translation: placeholder='$t:search.placeholder' â†’ 'Type to search' (en-US)",
          "Prop translation: title='$t:save.tooltip' â†’ 'Save changes' (en-US)",
          "Accessibility: ARIA labels translated for screen readers",
          "UX: Placeholder text translated in initial HTML",
          "No $t: in attributes: All prop values fully resolved"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-021",
      "given": "a page with translation tokens ($t:) in content property",
      "when": "the page is server-side rendered",
      "then": "translation tokens in content should be resolved to translated text in initial HTML",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "translations": {
              "en-US": {
                "welcome.message": "Welcome back!"
              },
              "fr-FR": {
                "welcome.message": "Bon retour!"
              }
            }
          }
        },
        "assertions": [
          "$t: tokens in content resolve during SSR",
          "Content text fully translated",
          "No $t: in text nodes"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "translations": {
            "en-US": {
              "hero.tagline": "Build amazing apps with configuration",
              "footer.copyright": "Â© 2025 All rights reserved"
            },
            "fr-FR": {
              "hero.tagline": "CrÃ©ez des applications incroyables avec configuration",
              "footer.copyright": "Â© 2025 Tous droits rÃ©servÃ©s"
            }
          }
        },
        "page": {
          "sections": [
            {
              "type": "p",
              "content": "$t:hero.tagline"
            },
            {
              "type": "footer",
              "content": "$t:footer.copyright"
            }
          ]
        },
        "expectedDOM": {
          "en-US": "<p>Build amazing apps with configuration</p><footer>Â© 2025 All rights reserved</footer>",
          "fr-FR": "<p>CrÃ©ez des applications incroyables avec configuration</p><footer>Â© 2025 Tous droits rÃ©servÃ©s</footer>"
        },
        "assertions": [
          "Content translation: content='$t:hero.tagline' â†’ 'Build amazing apps with configuration'",
          "Content translation: content='$t:footer.copyright' â†’ 'Â© 2025 All rights reserved'",
          "Server-side rendering: Content resolved during renderToString()",
          "No $t: in text: All content fully translated before sending HTML",
          "Language switching: French content when fr-FR selected"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-022",
      "given": "a complete page with $t: tokens in children, props, and content",
      "when": "the page HTML is generated via server-side rendering",
      "then": "no $t: symbols should remain anywhere in the rendered HTML output",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "translations": {
              "en-US": {
                "nav.home": "Home",
                "hero.title": "Welcome",
                "button.cta": "Get Started",
                "input.email.placeholder": "Enter email",
                "footer.text": "Â© 2025 Company"
              }
            }
          }
        },
        "assertions": [
          "No $t: symbols in HTML output",
          "All translation tokens fully resolved",
          "SSR produces complete translated HTML"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "translations": {
            "en-US": {
              "page.title": "Home Page",
              "nav.home": "Home",
              "nav.about": "About",
              "hero.title": "Welcome to Sovrium",
              "hero.subtitle": "Build your next app",
              "button.cta": "Get Started",
              "input.email.placeholder": "Enter your email",
              "input.email.label": "Email address",
              "footer.copyright": "Â© 2025 Sovrium"
            }
          }
        },
        "page": {
          "meta": {
            "title": "$t:page.title"
          },
          "sections": [
            {
              "type": "nav",
              "children": [
                {
                  "type": "a",
                  "children": ["$t:nav.home"]
                },
                {
                  "type": "a",
                  "children": ["$t:nav.about"]
                }
              ]
            },
            {
              "type": "section",
              "children": [
                {
                  "type": "h1",
                  "content": "$t:hero.title"
                },
                {
                  "type": "p",
                  "content": "$t:hero.subtitle"
                },
                {
                  "type": "button",
                  "children": ["$t:button.cta"]
                }
              ]
            },
            {
              "type": "form",
              "children": [
                {
                  "type": "input",
                  "props": {
                    "type": "email",
                    "placeholder": "$t:input.email.placeholder",
                    "aria-label": "$t:input.email.label"
                  }
                }
              ]
            },
            {
              "type": "footer",
              "content": "$t:footer.copyright"
            }
          ]
        },
        "expectedDOM": "<html lang=\"en-US\"><head><title>Home Page</title></head><body><nav><a>Home</a><a>About</a></nav><section><h1>Welcome to Sovrium</h1><p>Build your next app</p><button>Get Started</button></section><form><input type=\"email\" placeholder=\"Enter your email\" aria-label=\"Email address\" /></form><footer>Â© 2025 Sovrium</footer></body></html>",
        "assertions": [
          "Complete SSR validation: Entire page rendered with all translations resolved",
          "Children arrays: $t:nav.home â†’ 'Home', $t:button.cta â†’ 'Get Started'",
          "Content property: $t:hero.title â†’ 'Welcome to Sovrium'",
          "Props (ARIA/placeholder): $t:input.email.placeholder â†’ 'Enter your email'",
          "Meta tags: $t:page.title â†’ 'Home Page' in <title>",
          "CRITICAL VALIDATION: HTML content MUST NOT contain '$t:' anywhere",
          "Regex test: page.content().match(/\\$t:/) === null",
          "SSR complete: All translation tokens resolved before HTML sent to browser",
          "No client-side translation needed: HTML ready for immediate display"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-INTEGRATION-001",
      "given": "a multi-language app with theme integration",
      "when": "language direction affects theme spacing and layout",
      "then": "it should apply RTL-aware theme tokens for Arabic/Hebrew while maintaining LTR for English/French",
      "application": {
        "languages": {
          "default": "en",
          "supported": [
            {
              "code": "en",
              "direction": "ltr"
            },
            {
              "code": "ar",
              "direction": "rtl"
            }
          ]
        },
        "theme": {
          "spacing": {
            "section": "4rem",
            "container": "max-w-7xl mx-auto px-4"
          }
        },
        "component": "page-section",
        "expectedDOM": {
          "en-US": "<html lang=\"en-US\" dir=\"ltr\"><section style=\"padding: 4rem 0;\"><div style=\"max-width: 80rem; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem;\">Content</div></section></html>",
          "ar-SA": "<html lang=\"ar-SA\" dir=\"rtl\"><section style=\"padding: 4rem 0;\"><div style=\"max-width: 80rem; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem;\">Content</div></section></html>"
        },
        "assertions": [
          "Language direction controls HTML dir attribute",
          "Theme spacing remains consistent across languages",
          "RTL: margin-left/right automatically flip via dir=\"rtl\"",
          "Theme + Language integration: consistent design across directions",
          "CSS logical properties (margin-inline) respect dir attribute",
          "Unified theme tokens work for both LTR and RTL"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-INTEGRATION-002",
      "given": "a multi-language app with page content",
      "when": "user switches language on a page with translated content",
      "then": "it should update page metadata, HTML attributes, and visible text while maintaining scroll position and component state",
      "application": {
        "languages": {
          "default": "en",
          "persistSelection": true,
          "supported": [
            {
              "code": "en",
              "label": "English"
            },
            {
              "code": "fr",
              "label": "FranÃ§ais"
            }
          ]
        },
        "page": {
          "en-US": {
            "title": "Welcome to Our App",
            "description": "Discover our features"
          },
          "fr-FR": {
            "title": "Bienvenue sur Notre App",
            "description": "DÃ©couvrez nos fonctionnalitÃ©s"
          }
        },
        "userAction": "Switch from en-US to fr-FR",
        "component": "page",
        "expectedDOM": {
          "before": "<html lang=\"en-US\"><head><title>Welcome to Our App</title><meta name=\"description\" content=\"Discover our features\" /></head><body><h1>Welcome to Our App</h1></body></html>",
          "after": "<html lang=\"fr-FR\"><head><title>Bienvenue sur Notre App</title><meta name=\"description\" content=\"DÃ©couvrez nos fonctionnalitÃ©s\" /></head><body><h1>Bienvenue sur Notre App</h1></body></html>"
        },
        "localStorage": {
          "key": "sovrium_language",
          "value": "fr"
        },
        "assertions": [
          "HTML lang attribute updates: en-US â†’ fr-FR",
          "Page title updates: 'Welcome to Our App' â†’ 'Bienvenue sur Notre App'",
          "Meta description updates for SEO",
          "Visible text translates: heading, body content",
          "localStorage persists language choice",
          "Scroll position maintained (no page reload)",
          "Component state preserved during language switch",
          "Complete language + page integration"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-015",
      "given": "an app with centralized translations and components using $t: references",
      "when": "component content uses $t:key syntax",
      "then": "it should resolve translation keys from centralized translations dictionary",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ],
            "translations": {
              "en-US": {
                "common.save": "Save"
              },
              "fr-FR": {
                "common.save": "Enregistrer"
              }
            }
          }
        },
        "assertions": [
          "$t:common.save resolves to 'Save' in English",
          "$t:common.save resolves to 'Enregistrer' in French",
          "Centralized approach (PRIMARY pattern)",
          "Reusable across all components"
        ]
      },
      "application": {
        "languages": {
          "translations": {
            "en-US": {
              "common.save": "Save"
            },
            "fr-FR": {
              "common.save": "Enregistrer"
            }
          }
        },
        "page": {
          "sections": [
            {
              "type": "button",
              "children": ["$t:common.save"]
            }
          ]
        },
        "expectedDOM": {
          "en-US": "<button>Save</button>",
          "fr-FR": "<button>Enregistrer</button>"
        },
        "assertions": [
          "$t: prefix indicates centralized translation reference",
          "Key 'common.save' looked up in translations[currentLanguage]",
          "Single translation key used across multiple components",
          "DRY principle: no duplication of 'Save' translations"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-016",
      "given": "an app with centralized translations and a missing translation key",
      "when": "$t:key reference doesn't exist in current language",
      "then": "it should fall back to default language translation",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "fallback": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR"
              }
            ],
            "translations": {
              "en-US": {
                "common.save": "Save",
                "common.cancel": "Cancel"
              },
              "fr-FR": {
                "common.save": "Enregistrer"
              }
            }
          }
        },
        "assertions": [
          "French has 'common.save' translation",
          "French missing 'common.cancel' translation",
          "Fallback to English for missing keys",
          "Graceful degradation prevents blank text"
        ]
      },
      "application": {
        "languages": {
          "currentLanguage": "fr",
          "translations": {
            "en-US": {
              "common.save": "Save",
              "common.cancel": "Cancel"
            },
            "fr-FR": {
              "common.save": "Enregistrer"
            }
          }
        },
        "page": {
          "sections": [
            {
              "type": "button",
              "children": ["$t:common.save"]
            },
            {
              "type": "button",
              "children": ["$t:common.cancel"]
            }
          ]
        },
        "expectedDOM": "<div><button>Enregistrer</button><button>Cancel</button></div>",
        "assertions": [
          "common.save: French translation exists â†’ 'Enregistrer'",
          "common.cancel: French translation missing â†’ fallback to English 'Cancel'",
          "No blank buttons or errors",
          "Seamless UX with incomplete translations",
          "Translation coverage can be partial"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-018",
      "given": "an app with organized namespace structure in centralized translations",
      "when": "translations use namespaces (common.*, nav.*, homepage.*, errors.*)",
      "then": "it should organize translations by feature and improve maintainability",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US"
              }
            ],
            "translations": {
              "en-US": {
                "common.save": "Save",
                "common.cancel": "Cancel",
                "nav.home": "Home",
                "nav.about": "About",
                "homepage.hero.title": "Welcome",
                "homepage.hero.cta": "Get Started",
                "errors.404": "Not Found",
                "errors.500": "Server Error"
              }
            }
          }
        },
        "assertions": [
          "common.*: Reusable UI strings across app",
          "nav.*: Navigation-specific translations",
          "homepage.*: Homepage-specific content",
          "errors.*: Error messages",
          "Organized by feature, not by component type",
          "Semantic naming improves maintainability"
        ]
      },
      "application": {
        "languages": {
          "translations": {
            "en-US": {
              "common.save": "Save",
              "common.cancel": "Cancel",
              "nav.home": "Home",
              "nav.about": "About",
              "homepage.hero.title": "Welcome to Sovrium",
              "homepage.hero.cta": "Get Started",
              "errors.404": "Page not found",
              "errors.500": "Server error"
            }
          }
        },
        "namespaceOrganization": {
          "common.*": "Reusable UI strings (buttons, labels, actions)",
          "nav.*": "Navigation menu items",
          "[page].*": "Page-specific content (homepage.*, about.*, contact.*)",
          "errors.*": "Error messages",
          "forms.*": "Form labels, placeholders, validation",
          "auth.*": "Authentication flows"
        },
        "bestPractices": [
          "âœ… Semantic keys: common.save (not button1, btn_save)",
          "âœ… Feature-based: homepage.hero.title (not just hero.title)",
          "âœ… Consistent prefixes: all nav items under nav.*",
          "âŒ Avoid: component-type prefixes (button.save, div.content)",
          "âŒ Avoid: positional names (homepage.section1.text1)",
          "Translation file can be easily audited: 'Show all homepage.* keys'",
          "Translators understand context from namespace",
          "Scale to hundreds of translations without chaos"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-INTEGRATION-003",
      "given": "multi-language pages with localized SEO meta tags",
      "when": "page meta content uses translation references for different languages",
      "then": "it should generate localized meta tags and structured data per language",
      "validation": {
        "setup": {
          "languages": {
            "default": "en",
            "supported": ["en-US", "fr-FR", "es-ES"],
            "translations": {
              "en-US": {
                "meta.title": "Premium Wireless Headphones | Shop Now",
                "meta.description": "High-quality noise-cancelling headphones with superior sound",
                "meta.keywords": "headphones, wireless, noise-cancelling"
              },
              "fr-FR": {
                "meta.title": "Casque Sans Fil Premium | Acheter Maintenant",
                "meta.description": "Casque antibruit de haute qualitÃ© avec son supÃ©rieur",
                "meta.keywords": "casque, sans fil, antibruit"
              },
              "es-ES": {
                "meta.title": "Auriculares InalÃ¡mbricos Premium | Comprar Ahora",
                "meta.description": "Auriculares con cancelaciÃ³n de ruido de alta calidad",
                "meta.keywords": "auriculares, inalÃ¡mbricos, cancelaciÃ³n de ruido"
              }
            }
          },
          "page": {
            "meta": {
              "title": "$t:meta.title",
              "description": "$t:meta.description",
              "keywords": "$t:meta.keywords"
            }
          }
        },
        "assertions": [
          "Meta tags reference translations via $t: prefix",
          "Each language has complete meta translations",
          "SEO data varies per language"
        ]
      },
      "application": {
        "languages": {
          "default": "en",
          "supported": ["en-US", "fr-FR", "es-ES"],
          "translations": {
            "en-US": {
              "meta.title": "Premium Wireless Headphones | Shop Now",
              "meta.description": "High-quality noise-cancelling headphones with superior sound",
              "meta.keywords": "headphones, wireless, noise-cancelling",
              "meta.og.siteName": "AudioTech Store"
            },
            "fr-FR": {
              "meta.title": "Casque Sans Fil Premium | Acheter Maintenant",
              "meta.description": "Casque antibruit de haute qualitÃ© avec son supÃ©rieur",
              "meta.keywords": "casque, sans fil, antibruit",
              "meta.og.siteName": "Boutique AudioTech"
            },
            "es-ES": {
              "meta.title": "Auriculares InalÃ¡mbricos Premium | Comprar Ahora",
              "meta.description": "Auriculares con cancelaciÃ³n de ruido de alta calidad",
              "meta.keywords": "auriculares, inalÃ¡mbricos, cancelaciÃ³n de ruido",
              "meta.og.siteName": "Tienda AudioTech"
            }
          }
        },
        "page": {
          "meta": {
            "title": "$t:meta.title",
            "description": "$t:meta.description",
            "keywords": "$t:meta.keywords",
            "og:site_name": "$t:meta.og.siteName",
            "og:locale": "$lang"
          }
        },
        "expectedMeta": {
          "en-US": {
            "title": "Premium Wireless Headphones | Shop Now",
            "description": "High-quality noise-cancelling headphones with superior sound",
            "keywords": "headphones, wireless, noise-cancelling",
            "og:site_name": "AudioTech Store",
            "og:locale": "en_US",
            "html:lang": "en-US"
          },
          "fr-FR": {
            "title": "Casque Sans Fil Premium | Acheter Maintenant",
            "description": "Casque antibruit de haute qualitÃ© avec son supÃ©rieur",
            "keywords": "casque, sans fil, antibruit",
            "og:site_name": "Boutique AudioTech",
            "og:locale": "fr_FR",
            "html:lang": "fr-FR"
          },
          "es-ES": {
            "title": "Auriculares InalÃ¡mbricos Premium | Comprar Ahora",
            "description": "Auriculares con cancelaciÃ³n de ruido de alta calidad",
            "keywords": "auriculares, inalÃ¡mbricos, cancelaciÃ³n de ruido",
            "og:site_name": "Tienda AudioTech",
            "og:locale": "es_ES",
            "html:lang": "es-ES"
          }
        },
        "expectedHTML": {
          "en-US": "<html lang=\"en-US\">\n<head>\n  <title>Premium Wireless Headphones | Shop Now</title>\n  <meta name=\"description\" content=\"High-quality noise-cancelling headphones with superior sound\" />\n  <meta name=\"keywords\" content=\"headphones, wireless, noise-cancelling\" />\n  <meta property=\"og:site_name\" content=\"AudioTech Store\" />\n  <meta property=\"og:locale\" content=\"en_US\" />\n</head>",
          "fr-FR": "<html lang=\"fr-FR\">\n<head>\n  <title>Casque Sans Fil Premium | Acheter Maintenant</title>\n  <meta name=\"description\" content=\"Casque antibruit de haute qualitÃ© avec son supÃ©rieur\" />\n  <meta name=\"keywords\" content=\"casque, sans fil, antibruit\" />\n  <meta property=\"og:site_name\" content=\"Boutique AudioTech\" />\n  <meta property=\"og:locale\" content=\"fr_FR\" />\n</head>"
        },
        "assertions": [
          "Languages+Meta integration: Translation keys resolve to localized meta content",
          "SEO per language: Each language version has optimized meta tags",
          "Open Graph locale: og:locale follows language (en_US, fr_FR, es_ES)",
          "HTML lang attribute: Matches current language for accessibility",
          "Localized keywords: Search terms appropriate for each language",
          "Site name translation: Even brand elements can be localized",
          "Search engine optimization: Google indexes French page with French meta",
          "Social media sharing: Facebook shows localized og:site_name",
          "International SEO: Proper hreflang support via language system"
        ]
      }
    },
    {
      "id": "APP-LANGUAGES-REGRESSION-001",
      "given": "complete application configuration with all features",
      "when": "user completes full workflow",
      "then": "user can complete full languages workflow",
      "workflow": [
        {
          "step": 1,
          "action": "User defines language configuration with default, fallback, and supported languages",
          "validation": "All language codes validate against ISO 639-1 + ISO 3166-1 format (e.g., en-US, fr-FR, es-ES)",
          "expectedState": "Multi-language system configured with 3 languages, English default, browser detection enabled"
        },
        {
          "step": 2,
          "action": "System detects user language from Accept-Language header or localStorage",
          "validation": "Language detection logic prioritizes: localStorage > Accept-Language > default language",
          "expectedState": "Current language determined based on detection priority (e.g., fr-FR from browser)"
        },
        {
          "step": 3,
          "action": "System renders page in detected language with translated content",
          "validation": "HTML lang attribute, dir attribute, translated text, and meta tags all reflect current language",
          "expectedState": "Page displayed in French with correct text direction (LTR), translated meta tags, and localized content"
        },
        {
          "step": 4,
          "action": "User switches language via language-switcher component dropdown",
          "validation": "Language switcher renders all supported languages, user selection persists to localStorage",
          "expectedState": "Page switches to Spanish (es-ES), localStorage updated, content re-rendered in Spanish"
        },
        {
          "step": 5,
          "action": "System generates localized SEO meta tags and hreflang links",
          "validation": "hreflang alternate links for all languages, og:locale tags, HTML lang attribute correct",
          "expectedState": "Search engines see all language versions with proper hreflang tags and Open Graph locale metadata"
        }
      ],
      "application": {
        "completeExample": {
          "languages": {
            "default": "en",
            "fallback": "en",
            "supported": [
              {
                "code": "en",
                "label": "English",
                "locale": "en-US",
                "direction": "ltr"
              },
              {
                "code": "fr",
                "label": "FranÃ§ais",
                "locale": "fr-FR",
                "direction": "ltr"
              },
              {
                "code": "es",
                "label": "EspaÃ±ol",
                "locale": "es-ES",
                "direction": "ltr"
              }
            ],
            "detectBrowser": true,
            "persistSelection": true,
            "translations": {
              "en-US": {
                "nav.home": "Home",
                "nav.about": "About",
                "nav.contact": "Contact",
                "homepage.hero.title": "Welcome to Our Platform",
                "homepage.hero.subtitle": "Build amazing applications with ease",
                "homepage.hero.cta": "Get Started",
                "common.save": "Save",
                "common.cancel": "Cancel"
              },
              "fr-FR": {
                "nav.home": "Accueil",
                "nav.about": "Ã€ propos",
                "nav.contact": "Contact",
                "homepage.hero.title": "Bienvenue sur Notre Plateforme",
                "homepage.hero.subtitle": "CrÃ©ez des applications incroyables facilement",
                "homepage.hero.cta": "Commencer",
                "common.save": "Enregistrer",
                "common.cancel": "Annuler"
              },
              "es-ES": {
                "nav.home": "Inicio",
                "nav.about": "Acerca de",
                "nav.contact": "Contacto",
                "homepage.hero.title": "Bienvenido a Nuestra Plataforma",
                "homepage.hero.subtitle": "Crea aplicaciones increÃ­bles con facilidad",
                "homepage.hero.cta": "Empezar",
                "common.save": "Guardar",
                "common.cancel": "Cancelar"
              }
            }
          },
          "blocks": [
            {
              "name": "language-switcher",
              "type": "language-switcher",
              "props": {
                "variant": "dropdown",
                "showFlags": true,
                "position": "top-right"
              }
            }
          ],
          "pages": [
            {
              "name": "Home",
              "path": "/",
              "meta": {
                "title": "$t:homepage.hero.title",
                "description": "$t:homepage.hero.subtitle"
              },
              "sections": [
                {
                  "block": "language-switcher"
                },
                {
                  "type": "hero",
                  "props": {
                    "title": "$t:homepage.hero.title",
                    "subtitle": "$t:homepage.hero.subtitle",
                    "cta": "$t:homepage.hero.cta"
                  }
                }
              ]
            }
          ]
        },
        "expectedDOM": "<html lang=\"fr-FR\" dir=\"ltr\">\n<head>\n  <title>Bienvenue sur Notre Plateforme</title>\n  <meta name=\"description\" content=\"CrÃ©ez des applications incroyables facilement\" />\n  <meta property=\"og:locale\" content=\"fr_FR\" />\n  <meta property=\"og:locale:alternate\" content=\"en_US\" />\n  <meta property=\"og:locale:alternate\" content=\"es_ES\" />\n  <link rel=\"alternate\" hreflang=\"en-US\" href=\"https://example.com/en/\" />\n  <link rel=\"alternate\" hreflang=\"fr-FR\" href=\"https://example.com/fr/\" />\n  <link rel=\"alternate\" hreflang=\"es-ES\" href=\"https://example.com/es/\" />\n  <link rel=\"alternate\" hreflang=\"x-default\" href=\"https://example.com/en/\" />\n</head>\n<body>\n  <header>\n    <nav>\n      <a href=\"/fr/\" data-testid=\"nav-link-home\">Accueil</a>\n      <a href=\"/fr/about\" data-testid=\"nav-link-about\">Ã€ propos</a>\n      <a href=\"/fr/contact\" data-testid=\"nav-link-contact\">Contact</a>\n      <div data-testid=\"language-switcher\" class=\"dropdown\">\n        <button data-testid=\"language-switcher-trigger\">ðŸ‡«ðŸ‡· FranÃ§ais</button>\n        <ul data-testid=\"language-switcher-menu\">\n          <li><button data-testid=\"language-option-en\">ðŸ‡ºðŸ‡¸ English</button></li>\n          <li><button data-testid=\"language-option-fr\" class=\"active\">ðŸ‡«ðŸ‡· FranÃ§ais</button></li>\n          <li><button data-testid=\"language-option-es\">ðŸ‡ªðŸ‡¸ EspaÃ±ol</button></li>\n        </ul>\n      </div>\n    </nav>\n  </header>\n  <main>\n    <section data-testid=\"hero\">\n      <h1>Bienvenue sur Notre Plateforme</h1>\n      <p>CrÃ©ez des applications incroyables facilement</p>\n      <button data-testid=\"hero-cta\">Commencer</button>\n    </section>\n  </main>\n</body>\n</html>",
        "expectedMeta": {
          "htmlLang": "fr-FR",
          "direction": "ltr",
          "title": "Bienvenue sur Notre Plateforme",
          "description": "CrÃ©ez des applications incroyables facilement",
          "ogLocale": "fr_FR",
          "ogLocaleAlternate": ["en_US", "es_ES"],
          "hreflangLinks": [
            {
              "hreflang": "en-US",
              "href": "https://example.com/en/"
            },
            {
              "hreflang": "fr-FR",
              "href": "https://example.com/fr/"
            },
            {
              "hreflang": "es-ES",
              "href": "https://example.com/es/"
            },
            {
              "hreflang": "x-default",
              "href": "https://example.com/en/"
            }
          ]
        },
        "assertions": [
          "Languages configuration validates with default, fallback, supported array, detectBrowser, persistSelection",
          "Language detection works from Accept-Language header, localStorage, and default fallback",
          "HTML lang attribute matches current language (fr-FR)",
          "Text direction (dir) applied correctly based on language direction (ltr for French, rtl for Arabic)",
          "Language switcher component renders with all supported languages and flags",
          "Content translations resolve from centralized translations dictionary using $t: prefix",
          "Fallback to default language for missing translation keys (graceful degradation)",
          "SEO hreflang links generated for all language versions plus x-default",
          "Open Graph locale tags include og:locale (current) and og:locale:alternate (others)",
          "URL routing includes language prefix (/fr/, /en/, /es/) for proper SEO segmentation",
          "localStorage persists language selection across sessions (persistSelection: true)",
          "Complete multi-language workflow from config to translated page renders successfully",
          "International SEO best practices met: hreflang, og:locale, HTML lang, dir attributes",
          "Translation system supports nested namespaces (nav.*, homepage.*, common.*) for organization",
          "Browser language detection provides smart defaults on first visit",
          "RTL support ready for Arabic/Hebrew languages via direction property"
        ]
      },
      "integrationPoints": [
        "Page meta integration: Localized titles, descriptions, Open Graph tags per language",
        "URL routing integration: Language prefixes in paths (/en/, /fr/, /es/) for SEO",
        "Translation system: Centralized translations dictionary with $t:key references",
        "SEO meta tags: hreflang alternate links, og:locale, og:locale:alternate for international SEO",
        "Language-switcher block: Reusable component displaying all supported languages",
        "Content blocks: All text content supports $t: translation references",
        "Accept-Language header: Browser language detection for smart defaults",
        "localStorage: Persistent language selection across sessions",
        "Google Search Console: International targeting via hreflang implementation",
        "Browser language detection: navigator.language API for first-visit detection",
        "Accessibility: HTML lang attribute for screen readers and assistive technology",
        "Theme integration: Direction-aware spacing and layout (RTL/LTR support)"
      ]
    }
  ],
  "x-block-architecture-example": {
    "_comment": "Example demonstrating block-based architecture for language-switcher UI component",
    "configuration": {
      "default": "en",
      "supported": [
        {
          "code": "en-US",
          "label": "English",
          "direction": "ltr"
        },
        {
          "code": "fr-FR",
          "label": "FranÃ§ais",
          "direction": "ltr"
        },
        {
          "code": "es-ES",
          "label": "EspaÃ±ol",
          "direction": "ltr"
        }
      ],
      "detectBrowser": true,
      "persistSelection": true
    },
    "block-reference": {
      "description": "This example shows how language-switcher is implemented as a reusable block that references app.languages configuration",
      "blockDefinition": {
        "name": "language-switcher",
        "type": "language-switcher",
        "props": {
          "variant": "$variant",
          "showFlags": "$showFlags",
          "position": "$position"
        },
        "description": "Reusable language-switcher block that displays languages from app.languages"
      },
      "pageUsage": {
        "path": "/",
        "sections": [
          {
            "block": "language-switcher",
            "vars": {
              "variant": "dropdown",
              "showFlags": false,
              "position": "top-right"
            }
          }
        ],
        "description": "Homepage references language-switcher block with specific props"
      },
      "architecture": {
        "dataLayer": "app.languages - Configures available languages (default, supported, detectBrowser, persistSelection)",
        "templateLayer": "blocks[language-switcher] - Defines reusable UI component template with variable placeholders",
        "usageLayer": "pages[].sections[] - References block with concrete variable values",
        "benefits": [
          "Separation of concerns: languages config (data) vs UI presentation (block)",
          "Reusability: Same block can be used across multiple pages with different props",
          "Flexibility: Different pages can position switcher differently (header, footer, sidebar)",
          "Variants: Supports dropdown, inline, tabs display modes",
          "DRY: Single block definition, multiple references"
        ]
      },
      "props": {
        "variant": {
          "type": "string",
          "options": ["dropdown", "inline", "tabs"],
          "description": "Display variant for language switcher UI"
        },
        "showFlags": {
          "type": "boolean",
          "description": "Show flag icons next to language labels"
        },
        "position": {
          "type": "string",
          "examples": ["top-right", "header", "footer", "sidebar"],
          "description": "Position on page where switcher should appear"
        }
      }
    }
  }
}
